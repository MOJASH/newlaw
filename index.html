<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>حاسبة الحقوق العمالية - قانون العمل الأردني</title>
    <style>
        :root{
            --primary-color:#0d1b5e;
            --secondary-color:#f8f9fa;
            --accent-color:#d4af37;
            --text-color:#333;
            --border-color:#ddd;
            --gold-light:#f0e6d2;
            --blue-light:#e8f4fd;
        }
        *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
        body{background-color:#f5f7fa;color:var(--text-color);line-height:1.6;min-height:100vh;overflow-x:hidden;}
        #particles-js{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:linear-gradient(45deg,#0d1b5e,#1a237e,#283593,#303f9f);background-size:400% 400%;animation:gradientBG 15s ease infinite;}
        @keyframes gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
        .container{max-width:1200px;margin:0 auto;padding:15px;position:relative;z-index:1}
        header{background:linear-gradient(135deg,var(--primary-color),#1a237e);color:white;padding:15px;border-radius:8px 8px 0 0;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.1);margin-bottom:15px;border-bottom:3px solid var(--accent-color)}
        .creator-info{position:absolute;left:15px;top:10px;font-size:10px;opacity:0.7;color:var(--gold-light)}
        h1{margin-bottom:5px;font-size:22px;color:white}
        .header-subtitle{font-size:14px;margin-bottom:5px;color:var(--gold-light)}
        .header-instruction{font-size:12px;opacity:0.9;color:var(--gold-light)}
        .form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px;margin-bottom:15px}
        .form-section{background-color:white;padding:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);border-right:3px solid var(--accent-color)}
        h2{color:var(--primary-color);margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid var(--accent-color);font-size:16px}
        .input-group{margin-bottom:12px}
        label{display:block;margin-bottom:4px;font-weight:bold;font-size:13px;color:var(--primary-color)}
        input,select{width:100%;padding:8px;border:1px solid var(--border-color);border-radius:4px;font-size:14px;transition:border-color .3s}
        input:focus,select:focus{border-color:var(--accent-color);outline:none;box-shadow:0 0 0 2px rgba(212,175,55,0.2)}
        .compact-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
        .compact-row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
        .service-duration-group{display:flex;gap:10px}
        .service-duration-group .input-group{flex:1}
        .checkbox-group{display:flex;align-items:center;margin-bottom:8px}
        .checkbox-group input{width:auto;margin-left:8px}
        .checkbox-group.disabled{opacity:0.6;pointer-events:none}
        .contract-details{display:none;background-color:var(--blue-light);padding:12px;border-radius:4px;margin-top:8px;border-right:4px solid var(--primary-color);font-size:13px}
        .service-note{background-color:#fff8e1;color:#b8860b;padding:10px;border-radius:4px;margin-top:10px;border-right:4px solid var(--accent-color);font-size:12px;display:none}
        button{background:linear-gradient(135deg,var(--primary-color),#1a237e);color:white;border:none;padding:10px 15px;font-size:16px;border-radius:4px;cursor:pointer;width:100%;transition:all .3s;margin-bottom:8px;font-weight:bold}
        button:hover{background:linear-gradient(135deg,#1a237e,var(--primary-color));transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,0.2)}
        .reset-btn{background:linear-gradient(135deg,#6c757d,#5a6268)}
        .reset-btn:hover{background:linear-gradient(135deg,#5a6268,#6c757d)}
        .result-section{background-color:white;padding:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);margin-top:15px;display:none;border-right:3px solid var(--accent-color)}
        .result-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border-color);font-size:14px}
        .result-item:last-child{border-bottom:none;font-weight:bold;font-size:16px;color:var(--primary-color);background-color:var(--gold-light);padding:10px;border-radius:4px;margin-top:5px}
        .annual-leave-details{background-color:var(--blue-light);padding:12px;border-radius:4px;margin-top:8px;border-right:4px solid var(--primary-color);font-size:13px}
        .footer{text-align:center;margin-top:20px;padding:15px;background:linear-gradient(135deg,var(--primary-color),#1a237e);color:white;border-radius:8px;font-size:13px;border-top:3px solid var(--accent-color)}
        .copyright{font-size:11px;margin-top:8px;opacity:0.8;color:var(--gold-light)}
        .law-reference{font-size:12px;margin-top:4px;color:var(--gold-light)}
        .action-buttons{display:flex;gap:8px;margin-top:15px}
        .action-buttons button{flex:1;font-size:14px}
        .print-btn{background:linear-gradient(135deg,var(--accent-color),#b8941f);color:#333;font-weight:bold}
        .print-btn:hover{background:linear-gradient(135deg,#b8941f,var(--accent-color))}
        .result-note{background-color:var(--blue-light);padding:8px;border-radius:4px;margin-top:4px;border-right:4px solid var(--primary-color);font-size:11px;color:#555}
        .legal-notice{background-color:#ffebee;border:2px solid #f44336;color:#c62828;padding:10px;border-radius:4px;margin-top:15px;text-align:center;font-size:11px;line-height:1.5;font-weight:bold}
        .legal-notes{background-color:var(--secondary-color);border:1px solid #ddd;padding:12px;border-radius:4px;margin-top:15px;font-size:10px;line-height:1.4;color:#555}
        .legal-notes h3{color:var(--primary-color);margin-bottom:8px;font-size:12px;text-align:center;border-bottom:1px solid var(--accent-color);padding-bottom:5px}
        .legal-notes ul{list-style:none;padding:0;margin:0}
        .legal-notes li{margin-bottom:6px;padding-right:5px;border-right:2px solid var(--primary-color)}
        @media (max-width:768px){
            .container{padding:10px}
            .form-grid{grid-template-columns:1fr}
            .form-section{padding:12px}
            .creator-info{position:static;margin-bottom:8px;text-align:center}
            .service-duration-group{flex-direction:column}
            .action-buttons{flex-direction:column}
            .compact-row,.compact-row-3{grid-template-columns:1fr}
        }
        @media print{
            #particles-js,button,.legal-notice,.footer{display:none!important}
            .form-section,.result-section{box-shadow:none;border:1px solid #ddd}
            body{background-color:white}
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>

    <div class="container">
        <div class="creator-info">أنشئت بواسطة: المحامي محمد الشوحه</div>

        <header>
            <h1>حاسبة الحقوق العمالية</h1>
            <p class="header-subtitle">بناءً على قانون العمل الأردني رقم 8 لسنة 1996 وتعديلاته</p>
            <p class="header-instruction">أدخل معلوماتك لحساب مستحقاتك</p>
        </header>

        <form id="rightsCalculator">
            <div class="form-grid">
                <div class="form-section">
                    <h2>معلومات الأجر الأساسي</h2>
                    <div class="input-group">
                        <label for="wageType">نوع الأجر</label>
                        <select id="wageType" tabindex="1">
                            <option value="">-- اختر نوع الأجر --</option>
                            <option value="daily">أجر يومي</option>
                            <option value="monthly">أجر شهري</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="lastWage">الراتب الأساسي الأخير (دينار)</label>
                        <input type="number" id="lastWage" min="0" step="0.01" required tabindex="2">
                    </div>
                </div>

                <div class="form-section">
                    <h2>الرواتب المستحقة</h2>
                    <div class="input-group">
                        <label for="contractType">نوع العقد</label>
                        <select id="contractType" tabindex="3">
                            <option value="">-- اختر نوع العقد --</option>
                            <option value="indefinite">عقد غير محدد المدة</option>
                            <option value="definite">عقد محدد المدة</option>
                        </select>
                    </div>

                    <div class="contract-details" id="contractDetails">
                        <h3>تفاصيل العقد المحدد المدة</h3>
                        <div class="compact-row-3">
                            <div class="input-group">
                                <label for="contractDuration">مدة العقد (أشهر)</label>
                                <input type="number" id="contractDuration" min="1" step="1" tabindex="4">
                            </div>
                            <div class="input-group">
                                <label for="workedMonths">الأشهر التي عملتها</label>
                                <input type="number" id="workedMonths" min="0" step="1" tabindex="5">
                            </div>
                            <div class="input-group">
                                <label for="workedDays">الأيام التي عملتها</label>
                                <input type="number" id="workedDays" min="0" max="30" step="1" tabindex="6">
                            </div>
                        </div>
                    </div>

                    <div class="compact-row">
                        <div class="input-group">
                            <label for="unpaidMonths">أشهر مستحقة</label>
                            <input type="number" id="unpaidMonths" min="0" step="1" tabindex="7">
                        </div>
                        <div class="input-group">
                            <label for="unpaidDays">أيام مستحقة</label>
                            <input type="number" id="unpaidDays" min="0" step="1" tabindex="8">
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="vacationDays">أيام إجازات مستحقة</label>
                        <input type="number" id="vacationDays" min="0" step="1" tabindex="9">
                    </div>
                </div>

                <div class="form-section">
                    <h2>مدة الخدمة</h2>
                    <div class="service-duration-group">
                        <div class="input-group">
                            <label for="serviceYears">السنوات</label>
                            <input type="number" id="serviceYears" min="0" step="1" tabindex="10">
                        </div>
                        <div class="input-group">
                            <label for="serviceMonths">الأشهر</label>
                            <input type="number" id="serviceMonths" min="0" max="11" step="1" tabindex="11">
                        </div>
                        <div class="input-group">
                            <label for="serviceDays">الأيام</label>
                            <input type="number" id="serviceDays" min="0" max="30" step="1" tabindex="12">
                        </div>
                    </div>

                    <div class="service-note" id="serviceNote">
                        <strong>ملاحظة:</strong> يتم استخدام مدة الخدمة لاحتساب بدل نهاية الخدمة في حال عدم اشتراك العامل بالضمان الاجتماعي
                    </div>
                </div>

                <div class="form-section">
                    <h2>تفاصيل إنهاء الخدمة</h2>
                    <div class="checkbox-group" id="noticeMonthGroup">
                        <input type="checkbox" id="noticeMonth" tabindex="13">
                        <label for="noticeMonth">يستحق بدل شهر الإشعار</label>
                    </div>

                    <div class="input-group">
                        <label for="socialSecurity">الضمان الاجتماعي</label>
                        <select id="socialSecurity" tabindex="14">
                            <option value="yes">نعم - مشترك</option>
                            <option value="no">لا - غير مشترك</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="terminationType">سبب إنهاء الخدمة</label>
                        <select id="terminationType" tabindex="15">
                            <option value="mutual">إنهاء برضا الطرفين</option>
                            <option value="indefinite">فصل تعسفي (عقد غير محدد)</option>
                            <option value="definite">فصل تعسفي (عقد محدد)</option>
                        </select>
                    </div>

                    <div class="checkbox-group" id="arbitraryDismissalGroup" style="display:none">
                        <input type="checkbox" id="arbitraryDismissal" tabindex="16">
                        <label for="arbitraryDismissal">يستحق بدل فصل تعسفي</label>
                    </div>
                </div>

                <div class="form-section">
                    <h2>العمل الإضافي</h2>
                    <div class="compact-row">
                        <div class="input-group">
                            <label for="overtimeHours">ساعات إضافية/يوم</label>
                            <input type="number" id="overtimeHours" min="0" step="0.5" tabindex="17">
                        </div>
                        <div class="input-group">
                            <label for="overtimeDays">أيام عمل إضافي</label>
                            <input type="number" id="overtimeDays" min="0" step="1" tabindex="18">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>العمل في العطل والأعياد</h2>
                    <div class="compact-row">
                        <div class="input-group">
                            <label for="holidayDays">أيام العطل الرسمية</label>
                            <input type="number" id="holidayDays" min="0" step="1" tabindex="19">
                        </div>
                        <div class="input-group">
                            <label for="fridayDays">أيام الجمعة</label>
                            <input type="number" id="fridayDays" min="0" step="1" tabindex="20">
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button type="submit" tabindex="21">احسب المستحقات</button>
                <button type="button" class="reset-btn" id="resetBtn" tabindex="22">تفريغ الحقول</button>
            </div>
        </form>

        <div class="result-section" id="resultSection">
            <h2>نتائج حساب المستحقات</h2>
            <div id="resultContent"></div>

            <div class="legal-notes" id="legalNotes">
                <h3>ملاحظات قانونية</h3>
                <ul>
                    <li>م46: الأجر يُدفع خلال 7 أيام من استحقاقه، ولا يجوز حسمه إلا وفق القانون.</li>
                    <li>م61: للعامل إجازة سنوية 14 يومًا، وتصبح 21 يومًا بعد 5 سنوات خدمة متصلة لدى صاحب العمل.</li>
                    <li>م32: يستحق العامل الذي لا يخضع لأحكام الضمان الاجتماعي مكافأة نهاية خدمة تساوي شهر عن كل سنة خدمة.</li>
                    <li>م23: بدل الإشعار يساوي راتب شهر واحد ويحتسب بناءً على آخر أجر تقاضاه العامل.</li>
                    <li>م59: أجر العمل الإضافي يساوي 125% من أجر العامل المعتاد، و150% عند العمل بالعطل الرسمية أو الأعياد الدينية.</li>
                    <li>م25: في حالة الفصل التعسفي لعقود العمل غير محددة المدة فإن العامل يستحق بدل إشعار بالإضافة إلى أجر نصف شهر عن كل سنة خدمة بما لا يقل عن أجر شهرين.</li>
                    <li>م26: في حالة الفصل التعسفي لعقود العمل محددة المدة فإن العامل يستحق أجر باقي المدة العقدية.</li>
                    <li>يتم احتساب الحقوق العمالية عن آخر سنتين من تاريخ انتهاء العمل لدى صاحب العمل باستثناء مكافأة نهاية الخدمة فإنها تحتسب عن طيلة مدة الخدمة.</li>
                </ul>
            </div>

            <div class="legal-notice">تنبيه: هذه الحاسبة هي أداة إرشادية فقط، وهي غير ملزمة لأي جهة. يوصى دائماً باستشارة جهة مختصة للحصول على نتائج دقيقة.</div>

            <div class="action-buttons">
                <button type="button" class="print-btn" id="printBtn">طباعة النتائج</button>
            </div>
        </div>

        <div class="footer">
            <p>تم إنشاء هذه الصفحة بواسطة المحامي محمد الشوحه</p>
            <p class="law-reference">تم إنشاء هذه الحاسبة وفقاً لقانون العمل الأردني رقم 8 لسنة 1996 وتعديلاته</p>
            <p class="copyright">جميع الحقوق محفوظة © 2023 - هذه الصفحة محمية بموجب قوانين حقوق النشر والملكية الفكرية</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <script>
        // particles.js initialisation
        document.addEventListener('DOMContentLoaded', function() {
            particlesJS('particles-js', {
                particles: {
                    number: { value: 200, density: { enable: true, value_area: 800 } },
                    color: { value: "#d4af37" },
                    shape: { type: "circle", stroke: { width: 0, color: "#000000" }, polygon: { nb_sides: 5 } },
                    opacity: { value: 0.8, random: true },
                    size: { value: 2.5, random: true },
                    line_linked: { enable: true, distance: 120, color: "#d4af37", opacity: 0.4, width: 1 },
                    move: { enable: true, speed: 3, direction: "none", random: true, straight: false, out_mode: "out", bounce: false }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: { onhover: { enable: true, mode: "repulse" }, onclick: { enable: true, mode: "push" }, resize: true },
                    modes: { grab: { distance: 400, line_linked: { opacity: 1 } }, bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 }, repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 8 }, remove: { particles_nb: 2 } }
                },
                retina_detect: true
            });
        });

        // Elements
        const form = document.getElementById('rightsCalculator');
        const contractTypeEl = document.getElementById('contractType');
        const contractDetailsEl = document.getElementById('contractDetails');
        const serviceNoteEl = document.getElementById('serviceNote');
        const noticeMonthGroup = document.getElementById('noticeMonthGroup');
        const noticeMonthEl = document.getElementById('noticeMonth');
        const terminationTypeEl = document.getElementById('terminationType');
        const arbitraryDismissalGroup = document.getElementById('arbitraryDismissalGroup');
        const arbitraryDismissalEl = document.getElementById('arbitraryDismissal');
        const resultSection = document.getElementById('resultSection');
        const resultContent = document.getElementById('resultContent');
        const resetBtn = document.getElementById('resetBtn');

        // Print button
        document.getElementById('printBtn').addEventListener('click', function() {
            window.print();
        });

        // Contract type change
        contractTypeEl.addEventListener('change', function() {
            if (this.value === 'definite') {
                contractDetailsEl.style.display = 'block';
                serviceNoteEl.style.display = 'block';
                noticeMonthGroup.classList.add('disabled');
                noticeMonthEl.checked = false;
                noticeMonthEl.disabled = true;
                terminationTypeEl.value = 'definite';
                arbitraryDismissalGroup.style.display = 'none';
                arbitraryDismissalEl.checked = false;
            } else {
                contractDetailsEl.style.display = 'none';
                serviceNoteEl.style.display = 'none';
                noticeMonthGroup.classList.remove('disabled');
                noticeMonthEl.disabled = false;
                terminationTypeEl.value = 'indefinite';
                updateArbitraryDismissalGroup();
            }
        });

        terminationTypeEl.addEventListener('change', updateArbitraryDismissalGroup);

        function updateArbitraryDismissalGroup() {
            const contractType = contractTypeEl.value;
            const terminationType = terminationTypeEl.value;
            if (contractType === 'indefinite' && terminationType === 'indefinite') {
                arbitraryDismissalGroup.style.display = 'flex';
            } else {
                arbitraryDismissalGroup.style.display = 'none';
                arbitraryDismissalEl.checked = false;
            }
        }

        // Enter navigation
        const focusable = Array.from(document.querySelectorAll('input, select'));
        focusable.forEach((field, idx) => field.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const next = focusable[idx + 1];
                if (next) next.focus();
            }
        }));

        // Submit
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            calculateRights();
        });

        // Reset
        resetBtn.addEventListener('click', function() {
            form.reset();
            resultSection.style.display = 'none';
            contractDetailsEl.style.display = 'none';
            serviceNoteEl.style.display = 'none';
            arbitraryDismissalGroup.style.display = 'none';
            arbitraryDismissalEl.checked = false;
            noticeMonthGroup.classList.remove('disabled');
            noticeMonthEl.disabled = false;
        });

        // Main calculation
        function calculateRights() {
            const wageType = document.getElementById('wageType').value;
            const lastWage = parseFloat(document.getElementById('lastWage').value) || 0;
            const contractType = contractTypeEl.value;
            const unpaidMonths = parseInt(document.getElementById('unpaidMonths').value) || 0;
            const unpaidDays = parseInt(document.getElementById('unpaidDays').value) || 0;
            const vacationDays = parseInt(document.getElementById('vacationDays').value) || 0;
            const serviceYears = parseInt(document.getElementById('serviceYears').value) || 0;
            const serviceMonths = parseInt(document.getElementById('serviceMonths').value) || 0;
            const serviceDays = parseInt(document.getElementById('serviceDays').value) || 0;
            const noticeMonth = noticeMonthEl.checked;
            const terminationType = terminationTypeEl.value;
            const socialSecurity = document.getElementById('socialSecurity').value;
            const overtimeHours = parseFloat(document.getElementById('overtimeHours').value) || 0;
            const overtimeDays = parseInt(document.getElementById('overtimeDays').value) || 0;
            const holidayDays = parseInt(document.getElementById('holidayDays').value) || 0;
            const fridayDays = parseInt(document.getElementById('fridayDays').value) || 0;
            const contractDuration = parseInt(document.getElementById('contractDuration').value) || 0;
            const workedMonths = parseInt(document.getElementById('workedMonths').value) || 0;
            const workedDays = parseInt(document.getElementById('workedDays').value) || 0;
            const arbitraryDismissal = arbitraryDismissalEl.checked;

            // Validation
            if (!wageType) {
                alert("يرجى اختيار نوع الأجر");
                document.getElementById('wageType').focus();
                return;
            }
            if (!contractType) {
                alert("يرجى اختيار نوع العقد");
                contractTypeEl.focus();
                return;
            }

            // Calculations
            const totalServiceMonths = (serviceYears * 12) + serviceMonths + (serviceDays / 30);
            const dailyWage = wageType === 'daily' ? lastWage : lastWage / 30;
            const monthlyWage = wageType === 'monthly' ? lastWage : lastWage * 30;
            const hourlyWage = dailyWage / 8;
            const unpaidSalaries = (unpaidMonths * monthlyWage) + (unpaidDays * dailyWage);
            const vacationPay = vacationDays * dailyWage;

            let endOfServiceCompensation = 0;
            let explanation = "";
            let socialSecurityNote = "";

            let arbitraryDismissalCompensation = 0;
            let arbitraryDismissalExplanation = "";

            // Arbitrary dismissal compensation (if applicable)
            if (arbitraryDismissal && contractType === 'indefinite' && terminationType === 'indefinite') {
                arbitraryDismissalCompensation = calculateArbitraryDismissalCompensation(monthlyWage, serviceYears, serviceMonths, serviceDays);
                arbitraryDismissalExplanation = getArbitraryDismissalExplanation(monthlyWage, serviceYears, serviceMonths, serviceDays, arbitraryDismissalCompensation);
            }

            // Social security handling: KEEP explanation, REMOVE the socialSecurityNote when 'yes'
            if (socialSecurity === 'yes') {
                endOfServiceCompensation = 0;
                explanation = "لا يستحق العامل بدل نهاية الخدمة لأنه مشترك بالضمان الاجتماعي.";
                socialSecurityNote = ""; // <-- هنا قمنا بإفراغ السطر حسب طلبك
            } else {
                endOfServiceCompensation = calculateEndOfServiceCompensation(monthlyWage, serviceYears, serviceMonths, serviceDays);
                explanation = getEndOfServiceExplanation(monthlyWage, serviceYears, serviceMonths, serviceDays, endOfServiceCompensation);
                socialSecurityNote = "ملاحظة: يتم احتساب بدل نهاية الخدمة لأن العامل غير مشترك بالضمان الاجتماعي.";
            }

            // Notice compensation
            let noticeCompensation = 0;
            let noticeExplanation = "";

            if (contractType === 'definite') {
                noticeCompensation = 0;
                noticeExplanation = "لا يستحق العامل بدل شهر الإشعار في حالة العقد محدد المدة.";
            } else {
                noticeCompensation = noticeMonth ? monthlyWage : 0;
                noticeExplanation = noticeMonth ? "يستحق العامل بدل شهر الإشعار." : "لا يستحق العامل بدل شهر الإشعار.";
            }

            // Overtime and holidays
            const overtimePay = (overtimeHours * hourlyWage * 1.25) * overtimeDays;
            const holidayPay = holidayDays * dailyWage * 1.5;
            const fridayPay = fridayDays * dailyWage * 1.5;

            // Total
            const totalCompensation = unpaidSalaries + vacationPay + endOfServiceCompensation +
                noticeCompensation + overtimePay + holidayPay + fridayPay + arbitraryDismissalCompensation;

            // Render results
            let html = `
                <div class="result-item"><span>الرواتب المستحقة:</span><span>${unpaidSalaries.toFixed(2)} دينار</span></div>
                <div class="result-item"><span>بدل الإجازات المستحقة:</span><span>${vacationPay.toFixed(2)} دينار</span></div>
                <div class="result-item"><span>بدل نهاية الخدمة:</span><span>${endOfServiceCompensation.toFixed(2)} دينار</span></div>
                <div class="result-item"><span>بدل شهر الإشعار:</span><span>${noticeCompensation.toFixed(2)} دينار</span></div>
                <div class="result-item"><span>بدل العمل الإضافي:</span><span>${overtimePay.toFixed(2)} دينار</span></div>
                <div class="result-item"><span>بدل العطل الرسمية:</span><span>${holidayPay.toFixed(2)} دينار</span></div>
                <div class="result-item"><span>بدل أيام الجمعة:</span><span>${fridayPay.toFixed(2)} دينار</span></div>
            `;
            if (arbitraryDismissalCompensation > 0) {
                html += `<div class="result-item"><span>بدل الفصل التعسفي:</span><span>${arbitraryDismissalCompensation.toFixed(2)} دينار</span></div>`;
            }
            html += `<div class="result-item"><span>الإجمالي:</span><span>${totalCompensation.toFixed(2)} دينار</span></div>`;
            html += `<div class="result-note">${explanation}</div>`;
            html += `<div class="result-note">${noticeExplanation}</div>`;
            if (arbitraryDismissalExplanation) html += `<div class="result-note">${arbitraryDismissalExplanation}</div>`;
            if (socialSecurityNote) html += `<div class="result-note">${socialSecurityNote}</div>`;

            resultContent.innerHTML = html;
            resultSection.style.display = 'block';
            // Scroll to results
            window.scrollTo({ top: resultSection.offsetTop - 10, behavior: 'smooth' });
        }

        // Helper functions
        function calculateArbitraryDismissalCompensation(monthlyWage, years, months, days) {
            const totalMonths = years + (months / 12) + (days / 360);
            let compensation = (totalMonths / 2) * monthlyWage;
            if (compensation < monthlyWage * 2) compensation = monthlyWage * 2;
            return compensation;
        }

        function getArbitraryDismissalExplanation(monthlyWage, years, months, days, compensation) {
            const totalMonths = years + (months / 12) + (days / 360);
            const baseCompensation = (totalMonths / 2) * monthlyWage;
            if (baseCompensation < monthlyWage * 2) {
                return `بدل الفصل التعسفي: نصف شهر عن كل سنة خدمة بما لا يقل عن أجر شهرين (${(monthlyWage * 2).toFixed(2)} دينار) حسب المادة 25 من قانون العمل.`;
            } else {
                return `بدل الفصل التعسفي: نصف شهر عن كل سنة خدمة بما لا يقل عن أجر شهرين (${baseCompensation.toFixed(2)} دينار) حسب المادة 25 من قانون العمل.`;
            }
        }

        function calculateEndOfServiceCompensation(monthlyWage, years, months, days) {
            const totalMonths = years + (months / 12) + (days / 360);
            return totalMonths * monthlyWage;
        }

        function getEndOfServiceExplanation(monthlyWage, years, months, days, compensation) {
            return `بدل نهاية الخدمة: شهر عن كل سنة خدمة (${years} سنوات و ${months} أشهر و ${days} أيام) = ${compensation.toFixed(2)} دينار.`;
        }
    </script>
</body>
</html>
